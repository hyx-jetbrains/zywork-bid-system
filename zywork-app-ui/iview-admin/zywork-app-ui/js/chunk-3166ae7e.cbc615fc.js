(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3166ae7e"],{"0634":function(e,t,o){e.exports=o.p+"img/WeChat.fabed259.png"},"480a":function(e,t,o){e.exports=o.p+"img/QQ.7a4d4c84.png"},"4b4f":function(e,t,o){"use strict";var n=o("8df5"),r=o.n(n);r.a},"8df5":function(e,t,o){},"9ba7":function(e,t,o){e.exports=o.p+"img/login-bg.83b71fe7.jpg"},e49c:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login",style:e.loginStyle},[o("div",{staticClass:"login-con"},[o("Card",{attrs:{icon:"log-in",title:"欢迎登录",bordered:!1}},[o("div",{staticClass:"form-con"},[o("login-form",{attrs:{loginBtn:e.loginBtn},on:{"on-success-valid":e.handleSubmit}})],1)])],1)])},r=[],s=o("cebc"),i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Form",{ref:"loginForm",attrs:{model:e.form,rules:e.rules},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSubmit(t):null}}},[o("FormItem",{attrs:{prop:"username"}},[o("Input",{attrs:{placeholder:"请输入用户名",clearable:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),o("span",{attrs:{slot:"prepend"},slot:"prepend"},[o("Icon",{attrs:{size:16,type:"ios-person"}})],1)],1),o("FormItem",{attrs:{prop:"password"}},[o("Input",{attrs:{type:"password",placeholder:"请输入密码",clearable:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),o("span",{attrs:{slot:"prepend"},slot:"prepend"},[o("Icon",{attrs:{size:14,type:"md-lock"}})],1)],1),o("FormItem",{attrs:{prop:"verifyCode"}},[o("Row",[o("i-col",{attrs:{span:"18"}},[o("Input",{attrs:{placeholder:"请输入验证码",clearable:""},model:{value:e.form.verifyCode,callback:function(t){e.$set(e.form,"verifyCode",t)},expression:"form.verifyCode"}}),o("span",{attrs:{slot:"prepend"},slot:"prepend"},[o("Icon",{attrs:{size:14,type:"ios-color-wand"}})],1)],1),o("i-col",{attrs:{span:"6"}},[o("Tooltip",{attrs:{content:"刷新验证码",placement:"top"}},[o("img",{staticStyle:{height:"30px","margin-top":"2px",cursor:"pointer"},attrs:{src:e.imgUrl},on:{click:e.refreshVerifyCode}})])],1)],1)],1),o("FormItem",[o("Button",{attrs:{type:"primary",loading:e.loginBtn,long:""},on:{click:e.handleSubmit}},[e._v("登录")])],1)],1)},a=[],l=o("f121"),c=l["a"].baseUrl.pro,u={name:"LoginForm",props:{userNameRules:{type:Array,default:function(){return[{required:!0,message:"账号不能为空",trigger:"blur"}]}},passwordRules:{type:Array,default:function(){return[{required:!0,message:"密码不能为空",trigger:"blur"}]}},verifyCodeRules:{type:Array,default:function(){return[{required:!0,message:"验证码不能为空",trigger:"blur"}]}},loginBtn:!1},data:function(){return{form:{username:"",password:"",verifyCode:""},urls:{verifyCodeUrl:"/auth/verify-code?"+Math.random()},imgUrl:""}},computed:{rules:function(){return{username:this.userNameRules,password:this.passwordRules,verifyCode:this.verifyCodeRules}}},methods:{init:function(){this.refreshVerifyCode()},handleSubmit:function(){var e=this;this.$refs.loginForm.validate(function(t){t&&e.$emit("on-success-valid",{username:e.form.username,password:e.form.password,verifyCode:e.form.verifyCode})})},refreshVerifyCode:function(){this.imgUrl=c+this.urls.verifyCodeUrl+"?"+Math.random()}},mounted:function(){this.init()}},d=u,m=o("2877"),p=Object(m["a"])(d,i,a,!1,null,null,null),f=p.exports,g=f,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Row",{staticStyle:{"text-align":"center"}},[n("Tooltip",{attrs:{content:"QQ登入",placement:"top"}},[n("img",{staticClass:"login-icon",attrs:{src:o("480a")}})]),n("Tooltip",{attrs:{content:"微信登入",placement:"top"}},[n("img",{staticClass:"login-icon",attrs:{src:o("0634")}})])],1)},b=[],y={name:"OtherLogin",props:{},data:function(){return{}},computed:{},methods:{},mounted:function(){}},v=y,w=Object(m["a"])(v,h,b,!1,null,null,null),C=w.exports,k=C,I=o("2f62"),F=o("2e19"),S=o("90de"),x=o("f62d"),$=o("9ba7"),O=o.n($),R={components:{LoginForm:g,OtherLogin:k},data:function(){return{loginForm:{username:"",password:"",verifyCode:""},loginBtn:!1,loginStyle:{}}},methods:Object(s["a"])({},Object(I["b"])(["handleLogin","getUserRoles","getUserInfo","clearTokenAndAccess"]),{handleSubmit:function(e){var t=this,o=e.username,n=e.password,r=e.verifyCode;this.loginForm.username=o,this.loginForm.password=n,this.loginForm.verifyCode=r,this.loginBtn=!0,this.handleLogin(this).then(function(e){t.loginBtn=!1,e.data.code===F["b"]&&t.getUserRoles().then(function(e){e.length>0&&(Object(S["c"])(l["a"].hasAccessPermissionRoles,e)?t.getUserInfo().then(function(e){window.localStorage&&window.localStorage.removeItem("tagNaveList"),t.$router.push({name:t.$config.homeName})}):(t.$Message.error("您不是合法用户，不能访问此系统"),t.clearTokenAndAccess()))})})},notice:function(){l["a"].showDemoAccount&&this.$Notice.info({title:"体验账号密码",desc:"账号：demo@zywork.top 密码：Demo123456",duration:10})}}),mounted:function(){if(this.notice(),x["w"]){var e=O.a,t=x["w"].getItem(x["a"]);void 0!==t&&null!=t?(t=JSON.parse(t),null!==t.backgroundIcon&&""!==t.backgroundIcon&&void 0!==t.backgroundIcon&&(e=t.backgroundIcon)):Object(x["u"])(this),this.loginStyle={"background-image":"url("+e+")"}}}},U=R,A=(o("4b4f"),Object(m["a"])(U,n,r,!1,null,null,null));t["default"]=A.exports}}]);