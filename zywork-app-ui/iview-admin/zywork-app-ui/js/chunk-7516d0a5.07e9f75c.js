(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7516d0a5"],{"16e7":function(e,t,s){var a=s("d13f"),r=s("7704");a(a.G+a.F*(parseInt!=r),{parseInt:r})},"54aa":function(e,t,s){s("16e7"),e.exports=s("a7d3").parseInt},"739a":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"ios-ionitron"}}),e._v("Redis缓存管理\n    ")],1),s("a",{attrs:{slot:"extra",href:"javascript:;"},on:{click:e.searchKeys},slot:"extra"},[s("Icon",{attrs:{type:"ios-refresh"}}),e._v("刷新\n    ")],1),s("div",{staticClass:"demo-split"},[s("Split",{model:{value:e.splitDB,callback:function(t){e.splitDB=t},expression:"splitDB"}},[s("div",{staticClass:"demo-split-pane no-padding",attrs:{slot:"left"},slot:"left"},[s("Split",{attrs:{mode:"vertical"},model:{value:e.splitInfo,callback:function(t){e.splitInfo=t},expression:"splitInfo"}},[s("div",{staticClass:"demo-split-pane",attrs:{slot:"top"},slot:"top"},[s("Row",{staticStyle:{"margin-bottom":"10px"}},[s("i-col",{attrs:{span:"24"}},[s("Input",{staticClass:"search-input",attrs:{placeholder:"请输入key搜索..."},on:{"on-enter":e.searchKeys},model:{value:e.searchPattern,callback:function(t){e.searchPattern=t},expression:"searchPattern"}}),s("InputNumber",{staticStyle:{width:"120px","margin-right":"5px"},attrs:{placeholder:"请输入搜索数量"},on:{"on-enter":e.searchKeys},model:{value:e.searchCount,callback:function(t){e.searchCount=t},expression:"searchCount"}}),s("Button",{staticClass:"search-btn",attrs:{type:"primary",icon:"ios-search"},on:{click:e.searchKeys}},[e._v("搜索")]),s("Tooltip",{attrs:{content:"清空缓存，谨慎操作",placement:"bottom"}},[s("Button",{attrs:{type:"error",icon:"md-close"},on:{click:e.deleteKeys}},[e._v("清空keys")])],1)],1)],1),s("Collapse",{attrs:{simple:""},on:{"on-change":e.switchCollapse}},[s("Panel",{attrs:{name:"db"}},[e._v("数据库-0（"+e._s(e.keysCount)+"）\n                  "),s("p",{attrs:{slot:"content"},slot:"content"},[e.keysSpin?s("Spin",{attrs:{fix:""}}):e._e(),s("Scroll",{attrs:{height:"160"}},[s("Row",e._l(e.keysList,function(t){return s("div",{key:t.key},[s("i-col",{staticClass:"server-key-key",staticStyle:{"margin-bottom":"5px"},attrs:{span:"10"}},[s("a",{staticClass:"server-key",attrs:{href:"javascript:;"},on:{click:function(s){e.getValueByKey(t.key)}}},[e._v(e._s(t.key))])]),s("i-col",{attrs:{span:"2"}},[s("Tooltip",{attrs:{content:"删除缓存，谨慎操作",placement:"left"}},[s("a",{staticClass:"server-clear-key",attrs:{href:"javascript:;"},on:{click:function(s){e.deleteKey(t.key)}}},[s("Icon",{attrs:{type:"md-close"}})],1)])],1)],1)}))],1)],1)])],1)],1),s("div",{staticClass:"demo-split-pane",attrs:{slot:"bottom"},slot:"bottom"},[s("Divider",{staticClass:"server-value-divider"}),s("Row",{staticClass:"server-value-title"},[s("i-col",{attrs:{span:"2"}},[s("strong",{staticClass:"server-value-key"},[e._v("Key:")])]),s("i-col",{attrs:{span:"22"}},[e._v(e._s(e.valueInfo.key))])],1),s("Divider",{staticClass:"server-value-divider"}),s("Row",{staticClass:"server-value-title"},[s("i-col",{attrs:{span:"2"}},[s("strong",{staticClass:"server-value-key"},[e._v("Size:")])]),s("i-col",{attrs:{span:"22"}},[e._v(e._s(e.valueInfo.size))])],1),s("Divider",{staticClass:"server-value-divider"}),s("Row",{staticClass:"server-value-title"},[s("i-col",{attrs:{span:"2"}},[s("strong",{staticClass:"server-value-key"},[e._v("TTL:")])]),s("i-col",{attrs:{span:"22"}},[e._v(e._s(e.valueInfo.expire)+e._s(e.valueInfo.expireFormat))])],1),s("Divider",{staticClass:"server-value-divider",staticStyle:{"margin-bottom":"0px"}}),s("Row",{staticClass:"server-value-value"},[s("i-col",{attrs:{span:"22"}},[s("strong",{staticClass:"server-value-key"},[e._v("Value")])]),s("i-col",{attrs:{span:"2"}},[s("Tooltip",{attrs:{content:"删除缓存，谨慎操作"}},[s("Button",{staticClass:"server-clear-key",attrs:{type:"text",icon:"md-close"}})],1)],1)],1),s("Divider",{staticClass:"server-value-divider",staticStyle:{"margin-top":"0px"}}),s("Row",{staticClass:"server-value-val"},[s("Scroll",{attrs:{height:"200"}},[s("pre",{staticStyle:{"padding-left":"20px"}},[e._v(e._s(e.valueInfo.value))])])],1)],1)])],1),s("div",{staticClass:"demo-split-pane",attrs:{slot:"right"},slot:"right"},[s("h3",{staticClass:"server-info-title"},[s("Row",[s("i-col",{staticStyle:{"text-align":"left","padding-left":"15px"},attrs:{span:"12"}},[e._v("\n                Redis 服务器信息\n              ")]),s("i-col",{staticStyle:{"text-align":"right","padding-right":"15px"},attrs:{span:"12"}},[s("small",[s("a",{attrs:{href:"javascript:;"},on:{click:e.getRedisCacheInfo}},[s("Icon",{attrs:{type:"ios-refresh"}}),e._v("刷新\n                  ")],1)])])],1)],1),s("Divider",[e._v("基本信息")]),s("Row",{staticClass:"server-info-title"},[s("i-col",{attrs:{span:"12"}},[s("CellGroup",[s("Cell",{attrs:{title:"Redis 版本",label:e.redisInfo.redis_version}}),s("Cell",{attrs:{title:"已执行的命令",label:e.redisInfo.total_commands_processed}})],1)],1),s("i-col",{attrs:{span:"12"}},[s("CellGroup",[s("Cell",{attrs:{title:"已使用的内存",label:e.redisInfo.used_memory_rss}}),s("Cell",{attrs:{title:"正常运行时间",label:e.redisInfo.uptime_in_seconds}})],1)],1)],1),s("Divider",[e._v("详细信息")]),s("CellGroup",[s("Scroll",{attrs:{height:"290"}},[s("Cell",{attrs:{title:"arch_bits",extra:e.redisInfo.arch_bits}}),s("Cell",{attrs:{title:"config_file",extra:e.redisInfo.config_file}}),s("Cell",{attrs:{title:"hz",extra:e.redisInfo.hz}}),s("Cell",{attrs:{title:"lru_clock",extra:e.redisInfo.lru_clock}}),s("Cell",{attrs:{title:"multiplexing_api",extra:e.redisInfo.multiplexing_api}}),s("Cell",{attrs:{title:"os",extra:e.redisInfo.os}}),s("Cell",{attrs:{title:"process_id",extra:e.redisInfo.process_id}}),s("Cell",{attrs:{title:"redis_build_id",extra:e.redisInfo.redis_build_id}}),s("Cell",{attrs:{title:"redis_git_drity",extra:e.redisInfo.redis_git_dirty}}),s("Cell",{attrs:{title:"redis_git_sha1",extra:e.redisInfo.redis_git_sha1}}),s("Cell",{attrs:{title:"redis_mode",extra:e.redisInfo.redis_mode}}),s("Cell",{attrs:{title:"redis_version",extra:e.redisInfo.redis_version}}),s("Cell",{attrs:{title:"run_id",extra:e.redisInfo.run_id}}),s("Cell",{attrs:{title:"tcp_port",extra:e.redisInfo.tcp_port}}),s("Cell",{attrs:{title:"uptime_in_days",extra:e.redisInfo.uptime_in_days}}),s("Cell",{attrs:{title:"uptime_in_seconds",extra:e.redisInfo.uptime_in_seconds}})],1)],1)],1)])],1)])],1)},r=[],i=s("e814"),o=s.n(i),n=(s("ac6a"),s("b209"),s("66df")),l=s("4328"),c=s.n(l),_=function(){return n["a"].request({url:"/redis-manage/info",method:"GET",data:""})},d=function(e){return n["a"].request({url:"/redis-manage/keys",method:"POST",data:c.a.stringify(e)})},u=function(){return n["a"].request({url:"/redis-manage/keys-count",method:"GET",data:""})},p=function(e){return n["a"].request({url:"/redis-manage/value",method:"POST",data:c.a.stringify(e)})},f=function(e){return n["a"].request({url:"/redis-manage/del-key",method:"POST",data:c.a.stringify(e)})},m=function(e){return n["a"].request({url:"/redis-manage/del-keys",method:"POST",data:e})},v=s("2e19"),y="jwt_token::",h={name:"RedisCache",components:{},data:function(){return{splitDB:.6,splitInfo:.2,searchPattern:"*",searchCount:1,redisInfo:{aof_rewrite_scheduled:"N/A",number_of_cached_scripts:"N/A",mem_clients_slaves:"N/A",keyspace_misses:"N/A",mem_allocator:"N/A",multiplexing_api:"N/A",aof_last_write_status:"N/A",used_memory_peak_perc:"N/A",run_id:"N/A",uptime_in_seconds:"N/A",maxmemory:"N/A",active_defrag_hits:"N/A",atomicvar_api:"N/A",total_system_memory_human:"N/A",gcc_version:"N/A",second_repl_offset:"N/A",arch_bits:"N/A",master_repl_offset:"N/A",instantaneous_output_kbps:"N/A",total_commands_processed:"N/A",repl_backlog_size:"N/A",sync_full:"N/A",sync_partial_err:"N/A",aof_last_cow_size:"N/A",configured_hz:"N/A",used_memory_startup:"N/A",mem_clients_normal:"N/A",used_cpu_user:"N/A",aof_enabled:"N/A",redis_mode:"N/A",rdb_changes_since_last_save:"N/A",used_memory_lua:"N/A",redis_build_id:"N/A",connected_slaves:"N/A",expired_keys:"N/A",used_memory:"N/A",active_defrag_misses:"N/A",active_defrag_key_misses:"N/A",used_memory_rss:"N/A",rdb_last_bgsave_status:"N/A",process_id:"N/A",rejected_connections:"N/A",master_replid:"N/A",used_memory_rss_human:"N/A",used_memory_scripts:"N/A",rdb_bgsave_in_progress:"N/A",rdb_last_cow_size:"N/A",cluster_enabled:"N/A",tcp_port:"N/A",os:"N/A",mem_replication_backlog:"N/A",aof_current_rewrite_time_sec:"N/A",allocator_rss_ratio:"N/A",used_memory_overhead:"N/A",repl_backlog_histlen:"N/A",slave_expires_tracked_keys:"N/A",used_cpu_sys:"N/A",role:"N/A",used_memory_dataset_perc:"N/A",expired_stale_perc:"N/A",allocator_frag_ratio:"N/A",client_recent_max_input_buffer:"N/A",aof_last_bgrewrite_status:"N/A",used_memory_peak_human:"N/A",hz:"N/A",used_memory_human:"N/A",maxmemory_policy:"N/A",rss_overhead_ratio:"N/A",mem_fragmentation_ratio:"N/A",rdb_last_bgsave_time_sec:"N/A",allocator_allocated:"N/A",used_memory_dataset:"N/A",blocked_clients:"N/A",used_cpu_sys_children:"N/A",repl_backlog_active:"N/A",used_cpu_user_children:"N/A",sync_partial_ok:"N/A",aof_rewrite_in_progress:"N/A",redis_git_sha1:"N/A",rdb_current_bgsave_time_sec:"N/A",active_defrag_running:"N/A",aof_last_rewrite_time_sec:"N/A",master_replid2:"N/A",config_file:"N/A",lazyfree_pending_objects:"N/A",used_memory_scripts_human:"N/A",loading:"N/A",allocator_rss_bytes:"N/A",db3:"N/A",pubsub_channels:"N/A",db1:"N/A",used_memory_lua_human:"N/A",db0:"N/A",active_defrag_key_hits:"N/A",allocator_frag_bytes:"N/A",migrate_cached_sockets:"N/A",redis_git_dirty:"N/A",total_system_memory:"N/A",mem_aof_buffer:"N/A",rss_overhead_bytes:"N/A",client_recent_max_output_buffer:"N/A",connected_clients:"N/A",mem_fragmentation_bytes:"N/A",lru_clock:"N/A",pubsub_patterns:"N/A",expired_time_cap_reached_count:"N/A",repl_backlog_first_byte_offset:"N/A",total_net_output_bytes:"N/A",executable:"N/A",evicted_keys:"N/A",total_connections_received:"N/A",allocator_active:"N/A",mem_not_counted_for_evict:"N/A",redis_version:"N/A",total_net_input_bytes:"N/A",latest_fork_usec:"N/A",maxmemory_human:"N/A",used_memory_peak:"N/A",allocator_resident:"N/A",keyspace_hits:"N/A",uptime_in_days:"N/A",instantaneous_input_kbps:"N/A",instantaneous_ops_per_sec:"N/A",rdb_last_save_time:"N/A"},keysList:"",keysCount:0,keysSpin:!1,valueInfo:{key:"",value:"",size:"",expire:"",expireFormat:""},valueInterval:null}},computed:{},mounted:function(){this.getRedisCacheInfo(),this.getKeysCount()},beforeDestroy:function(){clearInterval(this.valueInterval)},methods:{switchCollapse:function(e){0===e.length?(this.splitInfo=.2,this.keysList=""):(this.splitInfo=.4,this.searchKeys())},getRedisCacheInfo:function(){var e=this;_().then(function(t){var s=t.data;s.code===v["b"]?(e.redisInfo=s.data,e.redisInfo.uptime_in_days=e.redisInfo.uptime_in_days+"天",e.redisInfo.uptime_in_seconds=e.formaturDing(e.redisInfo.uptime_in_seconds),e.redisInfo.used_memory_rss=(e.redisInfo.used_memory_rss/1024/1024).toFixed(2)+"M"):e.$Message.error(s.message)}).catch(function(t){e.$Message.error(t)})},getKeysCount:function(){var e=this;u().then(function(t){var s=t.data;s.code===v["b"]?e.keysCount=s.data:e.$Message.error(s.message)}).catch(function(t){e.$Message.error(t)})},searchKeys:function(){var e=this;null===this.searchCount&&(this.searchCount=1);var t={count:this.searchCount,pattern:this.searchPattern};this.keysSpin=!0,d(t).then(function(t){e.keysSpin=!1;var s=t.data;if(s.code===v["b"]){if(e.getKeysCount(),0===s.data.total)return void e.$Message.error("未获取到key");e.valueInfo="",e.keysList=s.data.rows}else e.$Message.error(s.message)}).catch(function(t){e.$Message.error(t)})},getValueByKey:function(e){var t=this;if(""!==e){var s={key:e};null!=this.valueInterval&&clearInterval(this.valueInterval),p(s).then(function(e){var s=e.data;if(s.code===v["b"]){if(t.valueInfo=s.data,-1!==t.valueInfo.expire){var a=(t.valueInfo.expire/1e3).toFixed(0);t.valueInfo.expire=a+" s",t.valueInfo.expireFormat="（"+t.formaturDing(a)+"）",t.valueInterval=setInterval(function(){a-=1,t.valueInfo.expire=a+" s",t.valueInfo.expireFormat="（"+t.formaturDing(a)+"）"},1e3)}t.valueInfo.size=t.valueInfo.size+" byte"}else t.$Message.error(s.message)}).catch(function(e){t.$Message.error(e)})}else this.$Message.error("key为空")},deleteKey:function(e){var t=this;if(""!==e)if(-1==e.indexOf(y)){var s={key:e};f(s).then(function(e){var s=e.data;s.code===v["b"]?(t.$Message.info(s.message),t.searchKeys()):t.$Message.error(s.message)}).catch(function(e){t.$Message.error(e)})}else this.$Message.error("该缓存不可删除");else this.$Message.error("key为空")},deleteKeys:function(){var e=this;if(this.keysCount<=0||this.keysList.length<=0)this.$Message.error("未获取到缓存，不需要清空");else{var t=[];this.keysList.forEach(function(e){-1==e.key.indexOf(y)&&t.push(e.key)});m(t).then(function(t){var s=t.data;s.code===v["b"]?(e.$Message.info(s.message),e.searchKeys()):e.$Message.error(s.message)}).catch(function(t){e.$Message.error(t)})}},formaturDing:function(e){var t=o()(e/86400),s=o()(e%86400/3600),a=o()(e%3600/60),r=e%60;return t+" 天 "+s+" 小时 "+a+" 分 "+r+" 秒 "}}},N=h,A=s("2877"),g=Object(A["a"])(N,a,r,!1,null,null,null);t["default"]=g.exports},7704:function(e,t,s){var a=s("da3c").parseInt,r=s("633a").trim,i=s("702a"),o=/^[-+]?0[xX]/;e.exports=8!==a(i+"08")||22!==a(i+"0x16")?function(e,t){var s=r(String(e),3);return a(s,t>>>0||(o.test(s)?16:10))}:a},b209:function(e,t,s){},e814:function(e,t,s){e.exports=s("54aa")}}]);