(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b1c48dd4"],{"24d2":function(e,t,r){"use strict";r.d(t,"c",function(){return s}),r.d(t,"a",function(){return c}),r.d(t,"d",function(){return d}),r.d(t,"b",function(){return p});r("ac6a"),r("386d");var o=r("795b"),a=r.n(o),n=r("66df"),l=r("2e19"),i=r("f62d"),s=(r("4328"),function(e,t){return new a.a(function(r,o){n["a"].request({url:e.urls.releaseStatusUrl,method:"POST",data:{id:t.id,releaseStatus:t.releaseStatus}}).then(function(t){t.data.code!==l["b"]?e.$Message.error(t.data.message):e.$Message.success(t.data.message),i["A"](e),r(t)}).catch(function(t){console.log(t),e.$Message.error("发布失败，稍候再试"),o(t)})})}),c=function(e,t){return new a.a(function(r,o){e.$Modal.confirm({title:"确认发布",content:"请确认重要信息是否填写完毕？确认无误后点击确定按钮发布",onOk:function(){var a=[];0===e.table.selections.length?e.$Message.warning("请选择需要批量发布的数据"):(e.table.selections.forEach(function(e,r){e.releaseStatus!==t&&a.push({id:e.id,releaseStatus:t})}),a.length>0?n["a"].request({url:e.urls.batchReleaseUrl,method:"POST",data:a}).then(function(t){t.data.code!==l["b"]?e.$Message.error(t.data.message):(e.$Message.success(t.data.message),e.table.selections=[],i["A"](e)),r(t)}).catch(function(t){console.log(t),e.$Message.error("批量发布数据失败，稍候再试"),o(t)}):e.$Message.warning("没有需要批量发布的数据"))},onCancel:function(){}})})},d=function(e,t){return new a.a(function(r,o){var a=0===t.isGuarantee?1:0;n["a"].request({url:e.urls.activeUrl,method:"POST",data:{id:t.id,isGuarantee:a}}).then(function(t){t.data.code!==l["b"]?e.$Message.error(t.data.message):e.$Message.success("开启或关闭成功"),i["A"](e),r(t)}).catch(function(t){console.log(t),e.$Message.error("设置失败，稍候再试"),o(t)})})},p=function(e,t){return new a.a(function(r,o){e.loading.delete=!0,n["a"].request({url:e.urls.deleteUrl,method:"POST",data:t}).then(function(t){t.data.code!==l["b"]?e.$Message.error(t.data.message):(e.modal.delete=!1,e.$Message.success(t.data.message)),e.loading.delete=!1,i["A"](e),r(t)}).catch(function(t){console.log(t),e.loading.delete=!1,e.$Message.error("删除失败，稍候再试"),o(t)})})}},"9da9":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Row",[r("i-col",{attrs:{span:"24"}},[r("Card",[r("Button",{attrs:{type:"primary"},on:{click:function(t){e.showModal("add")}}},[e._v("添加")]),e._v(" \n          "),r("Dropdown",{on:{"on-click":e.batchOpt}},[r("Button",{attrs:{type:"primary"}},[e._v("\n              批量操作\n              "),r("Icon",{attrs:{type:"ios-arrow-down"}})],1),r("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[r("DropdownItem",{attrs:{name:"batchActive"}},[e._v("批量激活")]),r("DropdownItem",{attrs:{name:"batchInactive"}},[r("span",{staticStyle:{color:"red"}},[e._v("批量冻结")])]),r("DropdownItem",{attrs:{name:"batchRemove",divided:""}},[r("span",{staticStyle:{color:"red"}},[e._v("批量删除")])])],1)],1),e._v(" \n          "),r("Dropdown",{on:{"on-click":e.projectTypeSearch}},[r("Button",{attrs:{type:"primary"}},[e._v("\n              "+e._s(e.currProjectType)+"\n              "),r("Icon",{attrs:{type:"ios-arrow-down"}})],1),r("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[r("DropdownItem",{attrs:{name:"all"}},[e._v("全部")]),r("DropdownItem",{attrs:{name:"building"}},[e._v("房建市政")]),r("DropdownItem",{attrs:{name:"hydraulic"}},[e._v("水利工程")]),r("DropdownItem",{attrs:{name:"traffic"}},[e._v("交通工程")]),r("DropdownItem",{attrs:{name:"purchase"}},[e._v("政府采购")]),r("DropdownItem",{attrs:{name:"important"}},[e._v("重点工程")]),r("DropdownItem",{attrs:{name:"other"}},[e._v("其他项目")])],1)],1),e._v(" \n          "),r("Button",{attrs:{type:"primary"},on:{click:function(t){e.showModal("search")}}},[e._v("高级搜索")]),e._v(" \n          "),r("Button",{attrs:{type:"primary"},on:{click:function(t){e.showModal("python")}}},[e._v("爬取数据")]),e._v(" \n          "),r("Tooltip",{attrs:{content:"刷新",placement:"right"}},[r("Button",{attrs:{icon:"md-refresh",type:"success",shape:"circle"},on:{click:e.search}})],1),r("Table",{ref:"dataTable",staticStyle:{"margin-top":"20px"},attrs:{stripe:"",loading:e.table.loading,columns:e.table.tableColumns,data:e.table.tableDetails},on:{"on-selection-change":e.changeSelection,"on-sort-change":e.changeSort}}),r("div",{staticStyle:{margin:"20px",overflow:"hidden"}},[r("div",{staticStyle:{float:"right"}},[r("Page",{attrs:{total:e.page.total,current:e.searchForm.pageNo,showSizer:"",showTotal:""},on:{"on-change":e.changePageNo,"on-page-size-change":e.changePageSize}})],1)])],1)],1)],1),r("Modal",{attrs:{title:"添加",fullscreen:!0},on:{"on-visible-change":function(t){e.changeModalVisibleResetForm("addForm",t)}},model:{value:e.modal.add,callback:function(t){e.$set(e.modal,"add",t)},expression:"modal.add"}},[r("Form",{ref:"addForm",attrs:{model:e.form,"label-width":80,rules:e.validateRules}},[r("FormItem",{attrs:{label:"项目编号",prop:"projectId"}},[r("span",{domProps:{textContent:e._s(e.form.projectId)}}),e._v("\n           \n          "),r("Button",{attrs:{type:"text"},on:{click:function(t){e.showModal("projectChoice")}}},[e._v("选择项目")]),e._v(" \n        ")],1),r("FormItem",{attrs:{label:"项目",prop:"projectTitle"}},[r("span",{domProps:{textContent:e._s(e.projectTitle)}})]),r("FormItem",{attrs:{label:"公示标题",prop:"title"}},[r("Input",{attrs:{placeholder:"请输入公示标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("FormItem",{attrs:{label:"项目类型",prop:"projectType"}},[r("Select",{attrs:{placeholder:"请选择项目类型",clearable:"",filterable:""},model:{value:e.form.projectType,callback:function(t){e.$set(e.form,"projectType",t)},expression:"form.projectType"}},e._l(e.projectType,function(t){return r("i-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),r("FormItem",{attrs:{label:"第一候选人",prop:"firstCandidate"}},[r("Input",{attrs:{placeholder:"请输入第一候选人"},model:{value:e.form.firstCandidate,callback:function(t){e.$set(e.form,"firstCandidate",t)},expression:"form.firstCandidate"}})],1),r("FormItem",{attrs:{label:"建造师姓名",prop:"firstBuilderName"}},[r("Input",{attrs:{placeholder:"请输入建造师姓名"},model:{value:e.form.firstBuilderName,callback:function(t){e.$set(e.form,"firstBuilderName",t)},expression:"form.firstBuilderName"}})],1),r("FormItem",{attrs:{label:"中标金额",prop:"firstMarkMoney"}},[r("Input",{attrs:{placeholder:"请输入中标金额"},model:{value:e.form.firstMarkMoney,callback:function(t){e.$set(e.form,"firstMarkMoney",t)},expression:"form.firstMarkMoney"}})],1),r("FormItem",{attrs:{label:"源地址",prop:"sourceUrl"}},[r("Input",{attrs:{placeholder:"请输入源地址"},model:{value:e.form.sourceUrl,callback:function(t){e.$set(e.form,"sourceUrl",t)},expression:"form.sourceUrl"}})],1),r("FormItem",{attrs:{label:"公示详情",prop:"announceDesc"}},[r("editor",{ref:"editorAdd",attrs:{value:e.form.announceDesc},on:{"on-change":e.handleChange}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text",size:"large"},on:{click:function(t){e.resetFormCancelModal("addForm","add")}}},[e._v("取消")]),r("Button",{attrs:{type:"primary",size:"large",loading:e.loading.add},on:{click:e.add}},[e._v("添加")])],1)],1),r("Modal",{attrs:{title:"修改",fullscreen:!0},on:{"on-visible-change":function(t){e.changeModalVisibleResetForm("editForm",t)}},model:{value:e.modal.edit,callback:function(t){e.$set(e.modal,"edit",t)},expression:"modal.edit"}},[r("Form",{ref:"editForm",attrs:{model:e.form,"label-width":80,rules:e.validateRules}},[r("FormItem",{attrs:{label:"项目编号",prop:"projectId"}},[r("span",{domProps:{textContent:e._s(e.form.projectId)}}),e._v("\n           \n          "),r("Button",{attrs:{type:"text"},on:{click:function(t){e.showModal("projectChoice")}}},[e._v("选择项目")]),e._v(" \n        ")],1),r("FormItem",{attrs:{label:"项目",prop:"projectTitle"}},[r("span",{domProps:{textContent:e._s(e.projectTitle)}})]),r("FormItem",{attrs:{label:"公示标题",prop:"title"}},[r("Input",{attrs:{placeholder:"请输入公示标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("FormItem",{attrs:{label:"项目类型",prop:"projectType"}},[r("Select",{attrs:{placeholder:"请选择项目类型",clearable:"",filterable:""},model:{value:e.form.projectType,callback:function(t){e.$set(e.form,"projectType",t)},expression:"form.projectType"}},e._l(e.projectType,function(t){return r("i-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),r("FormItem",{attrs:{label:"第一候选人",prop:"firstCandidate"}},[r("Input",{attrs:{placeholder:"请输入第一候选人"},model:{value:e.form.firstCandidate,callback:function(t){e.$set(e.form,"firstCandidate",t)},expression:"form.firstCandidate"}})],1),r("FormItem",{attrs:{label:"建造师姓名",prop:"firstBuilderName"}},[r("Input",{attrs:{placeholder:"请输入建造师姓名"},model:{value:e.form.firstBuilderName,callback:function(t){e.$set(e.form,"firstBuilderName",t)},expression:"form.firstBuilderName"}})],1),r("FormItem",{attrs:{label:"中标金额",prop:"firstMarkMoney"}},[r("Input",{attrs:{placeholder:"请输入中标金额"},model:{value:e.form.firstMarkMoney,callback:function(t){e.$set(e.form,"firstMarkMoney",t)},expression:"form.firstMarkMoney"}})],1),r("FormItem",{attrs:{label:"源地址",prop:"sourceUrl"}},[r("Input",{attrs:{placeholder:"请输入源地址"},model:{value:e.form.sourceUrl,callback:function(t){e.$set(e.form,"sourceUrl",t)},expression:"form.sourceUrl"}})],1),r("FormItem",{attrs:{label:"公示详情",prop:"announceDesc"}},[r("editor",{ref:"editorEdit",attrs:{value:e.form.announceDesc},on:{"on-change":e.handleChange}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text",size:"large"},on:{click:function(t){e.resetFormCancelModal("editForm","edit")}}},[e._v("取消")]),r("Button",{attrs:{type:"primary",size:"large",loading:e.loading.edit},on:{click:e.edit}},[e._v("修改")])],1)],1),r("Modal",{attrs:{title:"高级搜索"},model:{value:e.modal.search,callback:function(t){e.$set(e.modal,"search",t)},expression:"modal.search"}},[r("div",{attrs:{slot:"header"},slot:"header"},[r("Button",{attrs:{type:"text",size:"large"},on:{click:function(t){e.resetForm("searchForm")}}},[e._v("清空")]),r("Button",{attrs:{type:"text",size:"large"},on:{click:function(t){e.cancelModal("search")}}},[e._v("取消")]),r("Button",{attrs:{type:"primary",size:"large",loading:e.loading.search},on:{click:function(t){e.searchOkModal("search")}}},[e._v("搜索")])],1),r("Form",{ref:"searchForm",attrs:{model:e.searchForm,"label-width":80}},[r("FormItem",{attrs:{label:"公示编号"}},[r("Row",[r("i-col",{attrs:{span:"11"}},[r("FormItem",{attrs:{prop:"idMin"}},[r("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入开始公示编号"},model:{value:e.searchForm.idMin,callback:function(t){e.$set(e.searchForm,"idMin",t)},expression:"searchForm.idMin"}})],1)],1),r("i-col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[e._v("-")]),r("i-col",{attrs:{span:"11"}},[r("FormItem",{attrs:{prop:"idMax"}},[r("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入结束公示编号"},model:{value:e.searchForm.idMax,callback:function(t){e.$set(e.searchForm,"idMax",t)},expression:"searchForm.idMax"}})],1)],1)],1)],1),r("FormItem",{attrs:{label:"项目编号"}},[r("Row",[r("i-col",{attrs:{span:"11"}},[r("FormItem",{attrs:{prop:"projectIdMin"}},[r("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入开始项目编号"},model:{value:e.searchForm.projectIdMin,callback:function(t){e.$set(e.searchForm,"projectIdMin",t)},expression:"searchForm.projectIdMin"}})],1)],1),r("i-col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[e._v("-")]),r("i-col",{attrs:{span:"11"}},[r("FormItem",{attrs:{prop:"projectIdMax"}},[r("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入结束项目编号"},model:{value:e.searchForm.projectIdMax,callback:function(t){e.$set(e.searchForm,"projectIdMax",t)},expression:"searchForm.projectIdMax"}})],1)],1)],1)],1),r("FormItem",{attrs:{label:"项目标题",prop:"title"}},[r("Input",{attrs:{placeholder:"请输入项目标题"},model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1),r("FormItem",{attrs:{label:"项目类型",prop:"title"}},[r("Input",{attrs:{placeholder:"请输入项目类型"},model:{value:e.searchForm.projectType,callback:function(t){e.$set(e.searchForm,"projectType",t)},expression:"searchForm.projectType"}})],1),r("FormItem",{attrs:{label:"第一候选人",prop:"firstCandidate"}},[r("Input",{attrs:{placeholder:"请输入第一候选人"},model:{value:e.searchForm.firstCandidate,callback:function(t){e.$set(e.searchForm,"firstCandidate",t)},expression:"searchForm.firstCandidate"}})],1),r("FormItem",{attrs:{label:"建造师",prop:"firstBuilderName"}},[r("Input",{attrs:{placeholder:"请输入建造师"},model:{value:e.searchForm.firstBuilderName,callback:function(t){e.$set(e.searchForm,"firstBuilderName",t)},expression:"searchForm.firstBuilderName"}})],1),r("FormItem",{attrs:{label:"中标金额",prop:"firstMarkName"}},[r("Input",{attrs:{placeholder:"请输入中标金额"},model:{value:e.searchForm.firstMarkName,callback:function(t){e.$set(e.searchForm,"firstMarkName",t)},expression:"searchForm.firstMarkName"}})],1),r("FormItem",{attrs:{label:"是否激活",prop:"isActive"}},[r("Select",{attrs:{placeholder:"请选择是否激活",clearable:"",filterable:""},model:{value:e.searchForm.isActive,callback:function(t){e.$set(e.searchForm,"isActive",t)},expression:"searchForm.isActive"}},e._l(e.isActiveSelect,function(t){return r("i-option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),r("FormItem",{attrs:{label:"版本号"}},[r("Row",[r("i-col",{attrs:{span:"11"}},[r("FormItem",{attrs:{prop:"versionMin"}},[r("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入开始版本号"},model:{value:e.searchForm.versionMin,callback:function(t){e.$set(e.searchForm,"versionMin",t)},expression:"searchForm.versionMin"}})],1)],1),r("i-col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[e._v("-")]),r("i-col",{attrs:{span:"11"}},[r("FormItem",{attrs:{prop:"versionMax"}},[r("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入结束版本号"},model:{value:e.searchForm.versionMax,callback:function(t){e.$set(e.searchForm,"versionMax",t)},expression:"searchForm.versionMax"}})],1)],1)],1)],1),r("FormItem",{attrs:{label:"创建时间"}},[r("Row",[r("i-col",{attrs:{span:"11"}},[r("FormItem",{attrs:{prop:"createTimeMin"}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{value:e.searchForm.createTimeMin,placeholder:"请输入开始创建时间",type:"datetime",format:"yyyy-MM-dd HH:mm:ss"},on:{"on-change":function(t){e.searchForm.createTimeMin=t}}})],1)],1),r("i-col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[e._v("-")]),r("i-col",{attrs:{span:"11"}},[r("FormItem",{attrs:{prop:"createTimeMax"}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{value:e.searchForm.createTimeMax,placeholder:"请输入结束创建时间",type:"datetime",format:"yyyy-MM-dd HH:mm:ss"},on:{"on-change":function(t){e.searchForm.createTimeMax=t}}})],1)],1)],1)],1),r("FormItem",{attrs:{label:"更新时间"}},[r("Row",[r("i-col",{attrs:{span:"11"}},[r("FormItem",{attrs:{prop:"updateTimeMin"}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{value:e.searchForm.updateTimeMin,placeholder:"请输入开始更新时间",type:"datetime",format:"yyyy-MM-dd HH:mm:ss"},on:{"on-change":function(t){e.searchForm.updateTimeMin=t}}})],1)],1),r("i-col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[e._v("-")]),r("i-col",{attrs:{span:"11"}},[r("FormItem",{attrs:{prop:"updateTimeMax"}},[r("DatePicker",{staticStyle:{width:"100%"},attrs:{value:e.searchForm.updateTimeMax,placeholder:"请输入结束更新时间",type:"datetime",format:"yyyy-MM-dd HH:mm:ss"},on:{"on-change":function(t){e.searchForm.updateTimeMax=t}}})],1)],1)],1)],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text",size:"large"},on:{click:function(t){e.resetForm("searchForm")}}},[e._v("清空")]),r("Button",{attrs:{type:"text",size:"large"},on:{click:function(t){e.cancelModal("search")}}},[e._v("取消")]),r("Button",{attrs:{type:"primary",size:"large",loading:e.loading.search},on:{click:function(t){e.searchOkModal("search")}}},[e._v("搜索")])],1)],1),r("Modal",{attrs:{fullscreen:!0,title:"公示详情"},model:{value:e.modal.detailContent,callback:function(t){e.$set(e.modal,"detailContent",t)},expression:"modal.detailContent"}},[r("span",{domProps:{innerHTML:e._s(e.form.announceDesc)}})]),r("Modal",{attrs:{title:"详情"},model:{value:e.modal.detail,callback:function(t){e.$set(e.modal,"detail",t)},expression:"modal.detail"}},[r("p",[e._v("\n        公示编号:\n        "),r("span",{domProps:{textContent:e._s(e.form.id)}})]),r("p",[e._v("\n        项目编号:\n        "),r("span",{domProps:{textContent:e._s(e.form.projectId)}})]),r("p",[e._v("\n        项目类型:\n        "),r("span",{domProps:{textContent:e._s(e.form.projectType)}})]),r("p",[e._v("\n        项目标题\n        "),r("span",{domProps:{textContent:e._s(e.form.title)}})]),r("p",[e._v("\n        第一候选人:\n        "),r("span",{domProps:{textContent:e._s(e.form.firstCandidate)}})]),r("p",[e._v("\n        建造师:\n        "),r("span",{domProps:{textContent:e._s(e.form.firstBuilderName)}})]),r("p",[e._v("\n        中标金额:\n        "),r("span",{domProps:{textContent:e._s(e.form.firstMarkMoney)}})]),r("p",[e._v("\n        源地址：\n        "),r("a",{attrs:{href:e.form.sourceUrl,target:"_blank"}},[e._v(e._s(e.form.sourceUrl))])]),r("p",[e._v("\n        版本号:\n        "),r("span",{domProps:{textContent:e._s(e.form.version)}})]),r("p",[e._v("\n        创建时间:\n        "),r("span",{domProps:{textContent:e._s(e.form.createTime)}})]),r("p",[e._v("\n        更新时间:\n        "),r("span",{domProps:{textContent:e._s(e.form.updateTime)}})]),r("p",[e._v("\n        是否激活:\n        "),r("span",{domProps:{textContent:e._s(e.form.isActive)}})])]),r("Modal",{attrs:{transfer:!1,title:"招投标项目详情"},model:{value:e.modal.projectDetail,callback:function(t){e.$set(e.modal,"projectDetail",t)},expression:"modal.projectDetail"}},[r("project-detail",{attrs:{form:e.projectDetailForm}})],1),r("Modal",{attrs:{transfer:!1,fullscreen:"",title:"搜索主表信息"},model:{value:e.modal.projectDetailSearch,callback:function(t){e.$set(e.modal,"projectDetailSearch",t)},expression:"modal.projectDetailSearch"}},[r("project-list-single",{ref:"ProjectListSingle",on:{confirmSelectionProject:e.confirmSelectionProject}}),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text",size:"large"},on:{click:function(t){e.cancelModal("projectDetailSearch")}}},[e._v("取消")]),r("Button",{attrs:{type:"primary",size:"large"},on:{click:e.confirmProject}},[e._v("确认选择")])],1)],1),r("Modal",{attrs:{transfer:!1,fullscreen:"",title:"选择招投标项目"},model:{value:e.modal.projectChoice,callback:function(t){e.$set(e.modal,"projectChoice",t)},expression:"modal.projectChoice"}},[r("project-list-choice",{ref:"ProjectListChoice",on:{confirmChoiceProject:e.confirmChoiceProject}}),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text",size:"large"},on:{click:function(t){e.cancelModal("projectChoice")}}},[e._v("取消")]),r("Button",{attrs:{type:"primary",size:"large"},on:{click:e.confirmChoice}},[e._v("确认选择")])],1)],1),r("Modal",{attrs:{title:"爬取数据"},on:{"on-visible-change":function(t){e.changeModalVisibleResetForm("pythonForm",t)}},model:{value:e.modal.python,callback:function(t){e.$set(e.modal,"python",t)},expression:"modal.python"}},[r("Form",{ref:"pythonForm",attrs:{model:e.python,"label-width":80,rules:e.validateRules}},[r("FormItem",{attrs:{label:"数据来源",prop:"sourse"}},[r("a",{attrs:{href:e.sourceDataUrl,target:"_blank"}},[e._v(e._s(e.sourceDataUrl))])]),r("FormItem",{attrs:{label:"爬取说明",prop:"desc"}},[e._v("\n          爬取\n          "),r("span",{staticStyle:{color:"red"}},[e._v(e._s(e.typeLabel))]),e._v("第"),r("span",{staticStyle:{color:"red"}},[e._v(e._s(e.python.pageNo))]),e._v("页的数据，如果已经爬取到了的数据，则不会再爬取。\n        ")]),r("FormItem",{attrs:{label:"爬取类型",prop:"title"}},[r("Select",{attrs:{placeholder:"请选择爬取类型","label-in-value":!0},on:{"on-change":e.switchSourceDataUrl},model:{value:e.python.title,callback:function(t){e.$set(e.python,"title",t)},expression:"python.title"}},e._l(e.pythonProjectAnnounceTypeSelect,function(t){return r("i-option",{key:t.key,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),r("FormItem",{attrs:{label:"页码",prop:"pageNo"}},[r("Input",{attrs:{placeholder:"请输入更新页码"},model:{value:e.python.pageNo,callback:function(t){e.$set(e.python,"pageNo",t)},expression:"python.pageNo"}})],1),r("FormItem",{attrs:{label:"是否更新",prop:"isUpdate"}},[r("i-switch",{on:{"on-change":e.changeIsUpdate},model:{value:e.python.isUpdate,callback:function(t){e.$set(e.python,"isUpdate",t)},expression:"python.isUpdate"}}),r("p",{staticStyle:{color:"red"}},[e._v("说明：选择是-爬取的数据如果已存在，会更新数据。选择否-爬取的数据如果已存在，不会去更新数据。")])],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text",size:"large"},on:{click:function(t){e.cancelModal("python")}}},[e._v("取消")]),r("Button",{attrs:{type:"primary",size:"large",loading:e.loading.python},on:{click:e.crawlData}},[e._v("爬取")])],1)],1)],1)},a=[],n=(r("386d"),r("f499")),l=r.n(n),i=r("f62d"),s=(r("24d2"),r("f08a")),c=r("d3e2"),d=r("816b"),p=r("6776"),m=r("a0f0"),u=r("1a21"),h=r("66df"),f=r("2e19"),y={name:"ProjectAnnounce",components:{Editor:m["a"],ProjectDetail:s["a"],ProjectListSingle:c["a"],ProjectListChoice:p["a"]},data:function(){var e=this;return{projectDetailForm:{id:null,title:null,projectType:null,city:null,projectDetail:null,releaseStatus:null,markUnitName:null,projectInvest:null,checkPattern:null,compAptitudeType:null,builderLevel:null,moneyToImplement:100,tenderingAgent:null,phone:null,offerPrice:0,assurePrice:0,constructionPeriod:null,downloadEndTime:null,otherDemand:null,openMarkInfo:null,openMarkTime:null,openMarkAddr:null,inMarkPublicity:null,inMarkComp:null,noticeTime:null,clickCount:null,isElectronic:null,sourceUrl:null,version:null,createTime:null,updateTime:null,isActive:null},modal:{add:!1,edit:!1,search:!1,detail:!1,detailContent:!1,projectDetail:!1,projectDetailSearch:!1,projectChoice:!1,python:!1},loading:{add:!1,edit:!1,search:!1,python:!1},urls:{addUrl:"/projecannounce/admin/save",batchAddUrl:"/projecannounce/admin/batch-save",editUrl:"/projecannounce/admin/update",batchEditUrl:"/projecannounce/admin/batch-update",searchUrl:"/projecannounce/admin/pager-cond",allUrl:"/projecannounce/admin/all",removeUrl:"/projecannounce/admin/remove/",batchRemoveUrl:"/projecannounce/admin/batch-remove",detailUrl:"/projecannounce/admin/one/",activeUrl:"/projecannounce/admin/active",batchActiveUrl:"/projecannounce/admin/batch-active",uploadUrl:"/projecannounce/admin/upload-img",projectSelectUrl:"/projecannounce/admin/project-select",oneProjectUrl:"/project/admin/one/",pythonUpdateDataUrl:"/projecannounce/admin/python"},page:{total:0},sourceDataUrl:"http://jxsggzy.cn/web/jyxx/002001/002001004/jyxx.html",typeLabel:"",python:{title:"",pageNo:1,isUpdate:!1,firstBuilderName:"save"},form:{id:null,projectId:null,title:null,projectType:null,announceDesc:null,firstCandidate:null,firstBuilderName:null,firstMarkMoney:null,secondCandidate:null,thirdCandidate:null,sourceUrl:null,inwordHtmlUrl:null,version:null,createTime:null,updateTime:null,isActive:null},validateRules:{firstCandidate:[{type:"string",min:1,max:100,message:"必须1-100个字符",trigger:"blur"}],secondCandidate:[{type:"string",min:1,max:20,message:"必须1-20个字符",trigger:"blur"}],thirdCandidate:[{type:"string",min:1,max:20,message:"必须1-20个字符",trigger:"blur"}]},searchForm:{pageNo:1,pageSize:10,sortColumn:"createTime",sortOrder:"desc",id:null,idMin:null,idMax:null,title:null,projectType:null,projectId:null,projectIdMin:null,projectIdMax:null,announceDesc:null,firstBuilderName:null,firstMarkMoney:null,firstCandidate:null,secondCandidate:null,thirdCandidate:null,version:null,versionMin:null,versionMax:null,createTime:null,createTimeMin:null,createTimeMax:null,updateTime:null,updateTimeMin:null,updateTimeMax:null,isActive:null,isActiveMin:null,isActiveMax:null},table:{loading:!1,tableColumns:[{type:"selection",width:45,key:"id",align:"center",fixed:"left"},{width:60,align:"center",fixed:"left",render:function(t,r){return t("span",r.index+(e.searchForm.pageNo-1)*e.searchForm.pageSize+1)}},{title:"公示编号",key:"id",minWidth:120,sortable:!0},{title:"项目编号",key:"projectId",minWidth:120,sortable:!0,render:function(t,r){return t("Dropdown",{on:{"on-click":function(t){e.userOpt(t,r.row)}},props:{transfer:!0}},[t("span",[r.row.projectId,t("Icon",{props:{type:"ios-list",size:"25"}})]),t("DropdownMenu",{slot:"list"},[t("DropdownItem",{props:{name:"moduleDetailProject"}},"详情"),t("DropdownItem",{props:{name:"showSearchProject"}},"搜索")])])}},{title:"项目标题",key:"title",minWidth:200,sortable:!0},{title:"项目类型",key:"projectType",minWidth:150,sortable:!0},{title:"公示详情",key:"announceDesc",minWidth:120,sortable:!0,render:function(t,r){return t("a",{on:{click:function(){i["B"](e,"detailContent"),e.form=JSON.parse(l()(r.row))}}},"点击查看")}},{title:"第一候选人",key:"firstCandidate",minWidth:120,sortable:!0},{title:"建造师",key:"firstBuilderName",minWidth:120,sortable:!0},{title:"中标金额",key:"firstMarkMoney",minWidth:120,sortable:!0},{title:"源地址",key:"sourceUrl",minWidth:200,sortable:!0,render:function(e,t){var r=t.row;return e("a",{attrs:{href:r.sourceUrl,target:"_blank"}},r.sourceUrl)}},{title:"内部地址",key:"inwordHtmlUrl",minWidth:120,sortable:!0,render:function(t,r){var o=r.row.inwordHtmlUrl;return o?t("span",{},o):t("a",{on:{click:function(){e.form=JSON.parse(l()(r.row)),e.updateInwardHtmlUrl()}}},"点击生成")}},{title:"版本号",key:"version",minWidth:120,sortable:!0},{title:"创建时间",key:"createTime",minWidth:120,sortable:!0},{title:"更新时间",key:"updateTime",minWidth:120,sortable:!0},{title:"激活状态",key:"isActive",minWidth:100,align:"center",render:function(t,r){return t("i-switch",{props:{size:"large",value:0===r.row.isActive},style:{marginRight:"5px"},on:{"on-change":function(t){e.active(r.row)}}},[t("span",{slot:"open"},"激活"),t("span",{slot:"close"},"冻结")])}},{title:"操作",key:"action",width:120,align:"center",fixed:"right",render:function(t,r){return t("Dropdown",{on:{"on-click":function(t){e.userOpt(t,r.row)}},props:{transfer:!0}},[t("Button",{props:{type:"primary",size:"small"}},["选择操作 ",t("Icon",{props:{type:"ios-arrow-down"}})]),t("DropdownMenu",{slot:"list"},[t("DropdownItem",{props:{name:"showEdit"}},"编辑"),t("DropdownItem",{props:{name:"showDetail"}},"详情"),t("DropdownItem",{props:{name:"updateInwordHtmlUrl"}},"生成静态文件")])])}}],tableDetails:[],selections:[]},isActiveSelect:u["s"],pythonProjectAnnounceTypeSelect:u["G"],projectType:u["F"],projectTitle:"",currProjectType:"全部"}},computed:{},mounted:function(){this.search(),this.$refs.editorAdd.initEditor(this.urls.uploadUrl),this.$refs.editorEdit.initEditor(this.urls.uploadUrl)},methods:{showModal:function(e){"python"===e&&(this.python.title=this.pythonProjectAnnounceTypeSelect[0].value,this.typeLabel=this.pythonProjectAnnounceTypeSelect[0].label),this.projectTitle="",i["B"](this,e)},changeModalVisibleResetForm:function(e,t){t||i["z"](this,e)},resetForm:function(e){i["z"](this,e)},cancelModal:function(e){i["h"](this,e)},resetFormCancelModal:function(e,t){i["h"](this,t),i["z"](this,e)},searchOkModal:function(e){i["h"](this,e),this.searchForm.pageNo=1,i["A"](this)},projectTypeSearch:function(e){var t="";"building"===e?t="房建市政":"hydraulic"===e?t="水利工程":"traffic"===e?t="交通工程":"purchase"===e?t="政府采购":"important"===e?t="重点工程":"other"===e?t="其他项目":"all"===e&&(t=""),this.currProjectType="all"===e?"全部":t,this.searchForm.projectType=t,this.search()},batchOpt:function(e){"batchActive"===e?i["f"](this,0):"batchInactive"===e?i["f"](this,1):"batchRemove"===e&&i["g"](this)},userOpt:function(e,t){var r=this;"showEdit"===e?(this.showModal("edit"),this.form=JSON.parse(l()(t)),this.$refs.editorEdit.setHtml(this.form.announceDesc),i["t"]("/project/admin/one/",this.form.projectId).then(function(e){r.projectTitle=e.data.data.title})):"showDetail"===e?(i["B"](this,"detail"),this.form=JSON.parse(l()(t))):"remove"===e?i["y"](this,t):"moduleDetailProject"===e?this.showProjectDetailModal(t.projectId):"showSearchProject"===e?i["B"](this,"projectDetailSearch"):"updateInwordHtmlUrl"===e&&(this.form=JSON.parse(l()(t)),this.updateInwardHtmlUrl())},showProjectDetailModal:function(e){var t=this;Object(d["h"])(e).then(function(e){var r=e.data;r.code===f["b"]?(t.projectDetailForm=r.data,t.showModal("projectDetail")):t.$Message.error(r.message)}).catch(function(e){t.$Message.error(e)})},confirmSelectionProject:function(e){this.cancelModal("projectDetailSearch"),this.searchForm.projectIdMin=this.searchForm.projectIdMax=e,i["A"](this)},confirmProject:function(){this.$refs.ProjectListSingle.confirmSelection()},confirmChoiceProject:function(e,t,r){this.form.projectId=e,this.form.title=t+"[中标候选人公示]",this.projectTitle=t,this.form.projectType=r,this.cancelModal("projectChoice")},confirmChoice:function(){this.$refs.ProjectListChoice.confirmSelection()},add:function(){i["c"](this)},edit:function(){i["q"](this)},updateInwardHtmlUrl:function(){var e=this;this.form.inwordHtmlUrl?this.$Modal.confirm({title:"确认操作",content:"已存在文件，确认重新生成静态文件？",onOk:function(){i["q"](e)},onCancel:function(){}}):i["q"](this)},active:function(e){i["b"](this,e)},search:function(){i["A"](this)},changeSelection:function(e){i["o"](this,e)},changeSort:function(e){i["p"](this,e)},changePageNo:function(e){i["j"](this,e)},changePageSize:function(e){i["k"](this,e)},handleChange:function(e,t){this.form.announceDesc=e},switchSourceDataUrl:function(e){if(void 0!==e){var t=e.label;"房建市政"==t?this.sourceDataUrl="http://jxsggzy.cn/web/jyxx/002001/002001004/jyxx.html":"水利工程"==t?this.sourceDataUrl="http://jxsggzy.cn/web/jyxx/002003/002003004/jyxx.html":"交通工程"==t?this.sourceDataUrl="http://jxsggzy.cn/web/jyxx/002002/002002005/jyxx.html":"政府采购"==t?this.sourceDataUrl="http://jxsggzy.cn/web/jyxx/002006/002006004/jyxx.html":"重点项目"==t?this.sourceDataUrl="http://jxsggzy.cn/web/jyxx/002005/002005004/jyxx.html":"其他项目"==t&&(this.sourceDataUrl="http://jxsggzy.cn/web/jyxx/002013/002013002/jyxx.html"),this.typeLabel=t}},changeIsUpdate:function(e){this.python.firstBuilderName=e?"update":"save"},crawlData:function(){var e=this;this.python.pageNo?this.python.title?this.python.firstBuilderName?(this.loading["python"]=!0,h["a"].request({url:this.urls.pythonUpdateDataUrl,method:"POST",data:this.python}).then(function(t){t.data.code!==f["b"]?e.$Message.error(t.data.message):e.$Message.success(t.data.message),e.loading["python"]=!1,e.cancelModal("python")}).catch(function(t){e.loading["python"]=!1,console.log(t),e.$Message.error("爬取数据失败")})):this.$Message.error("请选择是否更新"):this.$Message.error("请选择爬取类型"):this.$Message.error("请输入页码")}}},v=y,g=r("2877"),b=Object(g["a"])(v,o,a,!1,null,null,null);t["default"]=b.exports}}]);