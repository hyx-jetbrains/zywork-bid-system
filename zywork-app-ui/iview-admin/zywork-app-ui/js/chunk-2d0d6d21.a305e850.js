(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6d21"],{"73d3":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("i-col",{attrs:{span:"24"}},[a("Card",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.showModal("add")}}},[t._v("添加")]),t._v(" \n          "),a("Dropdown",{on:{"on-click":t.batchOpt}},[a("Button",{attrs:{type:"primary"}},[t._v("\n              批量操作\n              "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"batchActive"}},[t._v("批量激活")]),a("DropdownItem",{attrs:{name:"batchInactive"}},[a("span",{staticStyle:{color:"red"}},[t._v("批量冻结")])]),a("DropdownItem",{attrs:{name:"batchRemove",divided:""}},[a("span",{staticStyle:{color:"red"}},[t._v("批量删除")])])],1)],1),t._v(" \n          "),a("Button",{attrs:{type:"primary"},on:{click:function(e){t.showModal("search")}}},[t._v("高级搜索")]),t._v(" \n          "),a("Tooltip",{attrs:{content:"刷新",placement:"right"}},[a("Button",{attrs:{icon:"md-refresh",type:"success",shape:"circle"},on:{click:t.search}})],1),a("Table",{ref:"dataTable",staticStyle:{"margin-top":"20px"},attrs:{stripe:"",loading:t.table.loading,columns:t.table.tableColumns,data:t.table.tableDetails},on:{"on-selection-change":t.changeSelection,"on-sort-change":t.changeSort}}),a("div",{staticStyle:{margin:"20px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.page.total,current:t.searchForm.pageNo,showSizer:"",showTotal:""},on:{"on-change":t.changePageNo,"on-page-size-change":t.changePageSize}})],1)])],1)],1)],1),a("Modal",{attrs:{title:"添加",fullscreen:!0},on:{"on-visible-change":function(e){t.changeModalVisibleResetForm("addForm",e)}},model:{value:t.modal.add,callback:function(e){t.$set(t.modal,"add",e)},expression:"modal.add"}},[a("Form",{ref:"addForm",attrs:{model:t.form,"label-width":80,rules:t.validateRules}},[a("FormItem",{attrs:{label:"轮播图标题",prop:"title"}},[a("Input",{attrs:{placeholder:"请输入轮播图标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("FormItem",{attrs:{label:"封面图片",prop:"imgUrl"}},[a("img",{staticStyle:{width:"80px","margin-right":"20px"},attrs:{"v-if":""!==t.form.url,src:t.form.url}}),a("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"on-success":t.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"on-progress":t.handleProgress,multiple:"",type:"drag",action:t.urls.uploadImgUrl,headers:t.uploadHeader}},[a("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)])],1),a("FormItem",{attrs:{label:"内容",prop:"content"}},[a("editor",{ref:"editorAdd",attrs:{value:t.form.content},on:{"on-change":t.handleChange}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.resetFormCancelModal("addForm","add")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large",loading:t.loading.add},on:{click:t.add}},[t._v("添加")])],1)],1),a("Modal",{attrs:{title:"修改",fullscreen:!0},on:{"on-visible-change":function(e){t.changeModalVisibleResetForm("editForm",e)}},model:{value:t.modal.edit,callback:function(e){t.$set(t.modal,"edit",e)},expression:"modal.edit"}},[a("Form",{ref:"editForm",attrs:{model:t.form,"label-width":80,rules:t.validateRules}},[a("FormItem",{attrs:{label:"轮播图标题",prop:"title"}},[a("Input",{attrs:{placeholder:"请输入轮播图标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("FormItem",{attrs:{label:"封面图片",prop:"imgUrl"}},[a("img",{staticStyle:{width:"80px","margin-right":"20px"},attrs:{"v-if":""!==t.form.url,src:t.form.url}}),a("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"on-success":t.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"on-progress":t.handleProgress,multiple:"",type:"drag",action:t.urls.uploadImgUrl,headers:t.uploadHeader}},[a("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)])],1),a("FormItem",{attrs:{label:"内容",prop:"content"}},[a("editor",{ref:"editorEdit",attrs:{value:t.form.content},on:{"on-change":t.handleChange}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.resetFormCancelModal("editForm","edit")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large",loading:t.loading.edit},on:{click:t.edit}},[t._v("修改")])],1)],1),a("Modal",{attrs:{title:"高级搜索"},model:{value:t.modal.search,callback:function(e){t.$set(t.modal,"search",e)},expression:"modal.search"}},[a("Form",{ref:"searchForm",attrs:{model:t.searchForm,"label-width":80}},[a("FormItem",{attrs:{label:"轮播广告编号"}},[a("Row",[a("i-col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"idMin"}},[a("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入开始轮播广告编号"},model:{value:t.searchForm.idMin,callback:function(e){t.$set(t.searchForm,"idMin",e)},expression:"searchForm.idMin"}})],1)],1),a("i-col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[t._v("-")]),a("i-col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"idMax"}},[a("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入结束轮播广告编号"},model:{value:t.searchForm.idMax,callback:function(e){t.$set(t.searchForm,"idMax",e)},expression:"searchForm.idMax"}})],1)],1)],1)],1),a("FormItem",{attrs:{label:"轮播图标题",prop:"title"}},[a("Input",{attrs:{placeholder:"请输入轮播图标题"},model:{value:t.searchForm.title,callback:function(e){t.$set(t.searchForm,"title",e)},expression:"searchForm.title"}})],1),a("FormItem",{attrs:{label:"是否激活",prop:"isActive"}},[a("Select",{attrs:{placeholder:"请选择是否激活",clearable:"",filterable:""},model:{value:t.searchForm.isActive,callback:function(e){t.$set(t.searchForm,"isActive",e)},expression:"searchForm.isActive"}},t._l(t.isActiveSelect,function(e){return a("i-option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),a("FormItem",{attrs:{label:"版本号"}},[a("Row",[a("i-col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"versionMin"}},[a("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入开始版本号"},model:{value:t.searchForm.versionMin,callback:function(e){t.$set(t.searchForm,"versionMin",e)},expression:"searchForm.versionMin"}})],1)],1),a("i-col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[t._v("-")]),a("i-col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"versionMax"}},[a("InputNumber",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入结束版本号"},model:{value:t.searchForm.versionMax,callback:function(e){t.$set(t.searchForm,"versionMax",e)},expression:"searchForm.versionMax"}})],1)],1)],1)],1),a("FormItem",{attrs:{label:"创建时间"}},[a("Row",[a("i-col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"createTimeMin"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{value:t.searchForm.createTimeMin,placeholder:"请输入开始创建时间",type:"datetime",format:"yyyy-MM-dd HH:mm:ss"},on:{"on-change":function(e){t.searchForm.createTimeMin=e}}})],1)],1),a("i-col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[t._v("-")]),a("i-col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"createTimeMax"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{value:t.searchForm.createTimeMax,placeholder:"请输入结束创建时间",type:"datetime",format:"yyyy-MM-dd HH:mm:ss"},on:{"on-change":function(e){t.searchForm.createTimeMax=e}}})],1)],1)],1)],1),a("FormItem",{attrs:{label:"更新时间"}},[a("Row",[a("i-col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"updateTimeMin"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{value:t.searchForm.updateTimeMin,placeholder:"请输入开始更新时间",type:"datetime",format:"yyyy-MM-dd HH:mm:ss"},on:{"on-change":function(e){t.searchForm.updateTimeMin=e}}})],1)],1),a("i-col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[t._v("-")]),a("i-col",{attrs:{span:"11"}},[a("FormItem",{attrs:{prop:"updateTimeMax"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{value:t.searchForm.updateTimeMax,placeholder:"请输入结束更新时间",type:"datetime",format:"yyyy-MM-dd HH:mm:ss"},on:{"on-change":function(e){t.searchForm.updateTimeMax=e}}})],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.resetForm("searchForm")}}},[t._v("清空")]),a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.cancelModal("search")}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large",loading:t.loading.search},on:{click:function(e){t.searchOkModal("search")}}},[t._v("搜索")])],1)],1),a("Modal",{attrs:{title:"详情"},on:{"on-visible-change":function(e){t.changeModalVisibleResetForm("editForm",e)}},model:{value:t.modal.detail,callback:function(e){t.$set(t.modal,"detail",e)},expression:"modal.detail"}},[a("p",[t._v("\n        轮播广告编号:\n        "),a("span",{domProps:{textContent:t._s(t.form.id)}})]),a("p",[t._v("\n        轮播图标题:\n        "),a("span",{domProps:{textContent:t._s(t.form.title)}})]),a("p",[t._v("\n        内容:\n        "),a("span",{domProps:{innerHTML:t._s(t.form.content)}})]),a("p",[t._v("\n        版本号:\n        "),a("span",{domProps:{textContent:t._s(t.form.version)}})]),a("p",[t._v("\n        创建时间:\n        "),a("span",{domProps:{textContent:t._s(t.form.createTime)}})]),a("p",[t._v("\n        更新时间:\n        "),a("span",{domProps:{textContent:t._s(t.form.updateTime)}})]),a("p",[t._v("是否激活: "),a("span",{domProps:{textContent:t._s(0===t.form.isActive?"激活":"冻结")}})])]),a("Modal",{attrs:{title:"内容详情",fullscreen:!0},model:{value:t.modal.detailContent,callback:function(e){t.$set(t.modal,"detailContent",e)},expression:"modal.detailContent"}},[a("span",{domProps:{innerHTML:t._s(t.form.content)}})]),a("Modal",{attrs:{title:"预览图片"},model:{value:t.modal.img,callback:function(e){t.$set(t.modal,"img",e)},expression:"modal.img"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.form.url}})])],1)},o=[],i=(a("7f7f"),a("386d"),a("f499")),n=a.n(i),l=a("f62d"),s=a("2e19"),c=a("1a21"),d=a("a0f0"),m=a("f121"),p=a("c276"),h=m["a"].baseUrl.pro,u=m["a"].baseUrl.cdnUrl,f={name:"Advertisement",components:{Editor:d["a"]},data:function(){var t=this;return{uploadHeader:{Authorization:"Bearer "+Object(p["e"])()},modal:{add:!1,edit:!1,search:!1,detail:!1,detailContent:!1,img:!1},loading:{add:!1,edit:!1,search:!1},urls:{addUrl:"/advertisement/admin/save",batchAddUrl:"/advertisement/admin/batch-save",editUrl:"/advertisement/admin/update",batchEditUrl:"/advertisement/admin/batch-update",searchUrl:"/advertisement/admin/pager-cond",allUrl:"/advertisement/admin/all",removeUrl:"/advertisement/admin/remove/",batchRemoveUrl:"/advertisement/admin/batch-remove",detailUrl:"/advertisement/admin/one/",activeUrl:"/advertisement/admin/active",batchActiveUrl:"/advertisement/admin/batch-active",uploadImgUrl:h+"/advertisement/admin/upload-img",uploadUrl:"/advertisement/admin/upload-img"},page:{total:0},form:{id:null,title:null,content:null,imgUrl:null,url:null,version:null,createTime:null,updateTime:null,isActive:null},validateRules:{title:[{type:"string",min:1,max:32,message:"必须1-32个字符",trigger:"blur"}],content:[],imgUrl:[{type:"string",min:1,max:200,message:"必须1-200个字符",trigger:"blur"}],url:[{type:"string",min:1,max:500,message:"必须1-500个字符",trigger:"blur"}]},searchForm:{pageNo:1,pageSize:10,sortColumn:null,sortOrder:null,id:null,idMin:null,idMax:null,title:null,content:null,imgUrl:null,url:null,version:null,versionMin:null,versionMax:null,createTime:null,createTimeMin:null,createTimeMax:null,updateTime:null,updateTimeMin:null,updateTimeMax:null,isActive:null,isActiveMin:null,isActiveMax:null},table:{loading:!1,tableColumns:[{type:"selection",width:45,key:"id",align:"center",fixed:"left"},{width:60,align:"center",fixed:"left",render:function(e,a){return e("span",a.index+(t.searchForm.pageNo-1)*t.searchForm.pageSize+1)}},{title:"轮播广告编号",key:"id",minWidth:130,sortable:!0},{title:"轮播图标题",key:"title",minWidth:120,sortable:!0},{title:"内容",key:"content",minWidth:120,render:function(e,a){return e("a",{on:{click:function(){t.showModal("detailContent"),t.form=JSON.parse(n()(a.row))}}},"点击查看")}},{title:"图片地址",key:"imgUrl",minWidth:180,sortable:!0},{title:"URL链接",key:"url",minWidth:180,sortable:!0,render:function(e,a){var r=a.row.url;return null==r||""==r||void 0==r?e("span",{},"暂无图片"):e("img",{attrs:{src:r},style:{width:"100px",height:"80px",cursor:"pointer"},on:{click:function(){t.showModal("img"),t.form=JSON.parse(n()(a.row))}}},"")}},{title:"版本号",key:"version",minWidth:120,sortable:!0},{title:"创建时间",key:"createTime",minWidth:150,sortable:!0},{title:"更新时间",key:"updateTime",minWidth:150,sortable:!0},{title:"是否激活",key:"isActive",minWidth:120,sortable:!0},{title:"激活状态",key:"isActive",minWidth:100,align:"center",render:function(e,a){return e("i-switch",{props:{size:"large",value:0===a.row.isActive},style:{marginRight:"5px"},on:{"on-change":function(e){t.active(a.row)}}},[e("span",{slot:"open"},"激活"),e("span",{slot:"close"},"冻结")])}},{title:"操作",key:"action",width:120,align:"center",fixed:"right",render:function(e,a){return e("Dropdown",{on:{"on-click":function(e){t.userOpt(e,a.row)}},props:{transfer:!0}},[e("Button",{props:{type:"primary",size:"small"}},["选择操作 ",e("Icon",{props:{type:"ios-arrow-down"}})]),e("DropdownMenu",{slot:"list"},[e("DropdownItem",{props:{name:"showEdit"}},"编辑"),e("DropdownItem",{props:{name:"showDetail"}},"详情"),e("DropdownItem",{props:{name:"remove"}},[e("span",{style:{color:"red"}},"删除")])])])}}],tableDetails:[],selections:[]},isActiveSelect:c["s"]}},computed:{},mounted:function(){this.search(),this.$refs.editorAdd.initEditor(this.urls.uploadUrl),this.$refs.editorEdit.initEditor(this.urls.uploadUrl)},methods:{showModal:function(t){"add"===t&&(this.form.url=""),l["B"](this,t)},changeModalVisibleResetForm:function(t,e){e||l["z"](this,t)},resetForm:function(t){l["z"](this,t)},cancelModal:function(t){l["h"](this,t)},resetFormCancelModal:function(t,e){l["h"](this,e),l["z"](this,t)},searchOkModal:function(t){l["h"](this,t),this.searchForm.pageNo=1,l["A"](this)},batchOpt:function(t){"batchActive"===t?l["f"](this,0):"batchInactive"===t?l["f"](this,1):"batchRemove"===t&&l["g"](this)},userOpt:function(t,e){"showEdit"===t?(l["B"](this,"edit"),this.form=JSON.parse(n()(e)),this.$refs.editorEdit.setHtml(this.form.content)):"showDetail"===t?(l["B"](this,"detail"),this.form=JSON.parse(n()(e))):"remove"===t&&l["y"](this,e)},add:function(){l["c"](this)},edit:function(){l["q"](this)},active:function(t){l["b"](this,t)},search:function(){l["A"](this)},changeSelection:function(t){l["o"](this,t)},changeSort:function(t){l["p"](this,t)},changePageNo:function(t){l["j"](this,t)},changePageSize:function(t){l["k"](this,t)},handleChange:function(t,e){this.form.content=t},handleSuccess:function(t,e){t.code===s["b"]?(this.$Notice.success({title:"上传成功",desc:e.name+" 上传成功"}),this.form.imgUrl=t.data,this.form.url=u+"/"+t.data):this.$Notice.error({title:"上传失败",desc:t.message})},handleFormatError:function(t){this.$Notice.warning({title:"文件格式不正确",desc:t.name+" 文件格式不正确，请选择JPG或PNG。"})},handleMaxSize:function(t){this.$Notice.warning({title:"超出文件大小限制",desc:t.name+" 太大，不得超过2M."})},handleProgress:function(t,e){this.$Notice.info({title:"文件正在上传",desc:e.name+" 上传中..."})}}},v=f,g=a("2877"),y=Object(g["a"])(v,r,o,!1,null,null,null);e["default"]=y.exports}}]);