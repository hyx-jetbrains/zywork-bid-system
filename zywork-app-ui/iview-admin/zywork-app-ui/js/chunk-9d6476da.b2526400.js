(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9d6476da"],{"0634":function(e,t,s){e.exports=s.p+"img/WeChat.fabed259.png"},"1dd5":function(e,t,s){},4512:function(e,t,s){e.exports=s.p+"img/AliPay.91a937c7.png"},"480a":function(e,t,s){e.exports=s.p+"img/QQ.7a4d4c84.png"},cfad:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Card",[s("Row",[s("i-col",{attrs:{span:"6"}},[s("Menu",{attrs:{theme:"light","active-name":"1"},on:{"on-select":e.switchMenu}},[s("MenuItem",{attrs:{name:"1"}},[e._v(e._s(e.itemMenuName1))]),s("MenuItem",{attrs:{name:"2"}},[e._v(e._s(e.itemMenuName2))]),s("MenuItem",{attrs:{name:"3"}},[e._v(e._s(e.itemMenuName3))])],1)],1),s("i-col",{attrs:{span:"18"}},[1==e.menuItem?s("Row",[s("i-col",{attrs:{span:"23",offset:"1"}},[s("Form",{attrs:{model:e.user,"label-position":"left","label-width":100}},[s("Divider",{attrs:{orientation:"left"}},[e._v(e._s(e.itemMenuName1))]),s("FormItem",{attrs:{label:"昵称"}},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入昵称"},model:{value:e.user.userDetailNickname,callback:function(t){e.$set(e.user,"userDetailNickname",t)},expression:"user.userDetailNickname"}})],1),s("FormItem",{attrs:{label:"性别"}},[s("RadioGroup",{model:{value:e.user.userDetailGender,callback:function(t){e.$set(e.user,"userDetailGender",t)},expression:"user.userDetailGender"}},[s("Radio",{attrs:{label:"0"}},[s("Icon",{attrs:{type:"md-help-circle"}}),e._v("未知\n                  ")],1),s("Radio",{attrs:{label:"1"}},[s("Icon",{attrs:{type:"md-male"}}),e._v("男\n                  ")],1),s("Radio",{attrs:{label:"2"}},[s("Icon",{attrs:{type:"md-female"}}),e._v("女\n                  ")],1)],1)],1),s("FormItem",{attrs:{label:"生日"}},[s("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"请选择生日"},on:{"on-change":e.setDate},model:{value:e.user.userDetailBirthday,callback:function(t){e.$set(e.user,"userDetailBirthday",t)},expression:"user.userDetailBirthday"}})],1),s("FormItem",{attrs:{label:"年龄"}},[s("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择生日",readonly:""},model:{value:e.user.userDetailAge,callback:function(t){e.$set(e.user,"userDetailAge",t)},expression:"user.userDetailAge"}})],1),s("FormItem",{attrs:{label:"注册时间"}},[s("span",{domProps:{textContent:e._s(e.user.userCreateTime)}})]),s("FormItem",[s("Button",{staticStyle:{width:"100px"},attrs:{type:"primary",loading:e.saveBtnLoading},on:{click:e.saveInfo}},[e._v("保存")])],1)],1)],1)],1):e._e(),2==e.menuItem?s("Row",[s("i-col",{attrs:{span:"23",offset:"1"}},[s("Divider",{attrs:{orientation:"left"}},[e._v(e._s(e.itemMenuName2))]),s("Row",[s("i-col",{attrs:{span:"2"}},[s("img",{staticClass:"my-item-img",attrs:{src:e.weChatImg}})]),s("i-col",{attrs:{span:"18"}},[s("strong",[e._v("微信")]),s("br"),s("span",{staticClass:"my-item-span"},[e._v(e._s(null!=e.user.userDetailWechat?"已绑定微信："+e.user.userDetailWechat:"未绑定微信"))])]),s("i-col",{staticClass:"my-item",attrs:{span:"4"}},[s("a",{attrs:{href:"javascript:;",id:"wechatA"},on:{click:function(t){e.userOptBind("wechat","wechatA")}}},[e._v(e._s(null!=e.user.userDetailWechat?"解除绑定":"立即绑定"))])])],1),s("Divider"),s("Row",[s("i-col",{attrs:{span:"2"}},[s("img",{staticClass:"my-item-img",attrs:{src:e.qqImg}})]),s("i-col",{attrs:{span:"18"}},[s("strong",[e._v("QQ")]),s("br"),s("span",{staticClass:"my-item-span"},[e._v(e._s(null!=e.user.userDetailQq?"已绑定QQ："+e.user.userDetailQq:"未绑定QQ"))])]),s("i-col",{staticClass:"my-item",attrs:{span:"4"}},[s("a",{attrs:{href:"javascript:;",id:"qqA"},on:{click:function(t){e.userOptBind("qq","qqA")}}},[e._v(e._s(null!=e.user.userDetailQq?"解除绑定":"立即绑定"))])])],1),s("Divider"),s("Row",[s("i-col",{attrs:{span:"2"}},[s("img",{staticClass:"my-item-img",attrs:{src:e.aliPayImg}})]),s("i-col",{attrs:{span:"18"}},[s("strong",[e._v("支付宝")]),s("br"),s("span",{staticClass:"my-item-span"},[e._v(e._s(null!=e.user.userDetailAlipay?"已绑定支付宝："+e.user.userDetailAlipay:"未绑定支付宝"))])]),s("i-col",{staticClass:"my-item",attrs:{span:"4"}},[s("a",{attrs:{href:"javascript:;",id:"alipayA"},on:{click:function(t){e.userOptBind("alipay","alipayA")}}},[e._v(e._s(null!=e.user.userDetailAlipay?"解除绑定":"立即绑定"))])])],1)],1)],1):e._e(),3==e.menuItem?s("Row",[s("i-col",{attrs:{span:"23",offset:"1"}},[s("Divider",{attrs:{orientation:"left"}},[e._v(e._s(e.itemMenuName3))]),s("Row",[s("i-col",{attrs:{span:"20"}},[s("strong",[e._v("账户密码")]),s("br"),s("span")]),s("i-col",{staticClass:"my-item",attrs:{span:"4"}},[s("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.userOpt("password")}}},[e._v("修改")])])],1),s("Divider"),s("Row",[s("i-col",{attrs:{span:"20"}},[s("strong",[e._v("绑定手机")]),s("br"),s("span",{staticClass:"my-item-span"},[e._v(e._s(null!=e.user.userPhone?"已绑定手机："+e.user.userPhone:"未绑定手机"))])]),s("i-col",{staticClass:"my-item",attrs:{span:"4"}},[s("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.userOpt("phone")}}},[e._v("修改")])])],1),s("Divider"),s("Row",[s("i-col",{attrs:{span:"20"}},[s("strong",[e._v("绑定邮箱")]),s("br"),s("span",{staticClass:"my-item-span"},[e._v(e._s(null!=e.user.userEmail?"已绑定邮箱："+e.user.userEmail:"未绑定邮箱"))])]),s("i-col",{staticClass:"my-item",attrs:{span:"4"}},[s("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.userOpt("email")}}},[e._v("修改")])])],1)],1)],1):e._e()],1)],1)],1),s("Modal",{attrs:{title:"修改登入密码"},model:{value:e.editPasswordModal,callback:function(t){e.editPasswordModal=t},expression:"editPasswordModal"}},[s("Form",{ref:"passwordForm",attrs:{model:e.passwordForm,"label-width":80,rules:e.validateRules}},[s("FormItem",{attrs:{label:"旧密码",prop:"oldPassword"}},[s("Input",{attrs:{type:"password",placeholder:"请输入旧密码"},model:{value:e.passwordForm.oldPassword,callback:function(t){e.$set(e.passwordForm,"oldPassword",t)},expression:"passwordForm.oldPassword"}})],1),s("FormItem",{attrs:{label:"新密码",prop:"password"}},[s("Input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:e.passwordForm.password,callback:function(t){e.$set(e.passwordForm,"password",t)},expression:"passwordForm.password"}})],1),s("FormItem",{attrs:{label:"确认密码",prop:"confirmPassword"}},[s("Input",{attrs:{type:"password",placeholder:"确认新密码"},model:{value:e.passwordForm.confirmPassword,callback:function(t){e.$set(e.passwordForm,"confirmPassword",t)},expression:"passwordForm.confirmPassword"}})],1),s("FormItem",{staticClass:"des"},[s("p",[s("strong",[e._v("温馨提示：")])]),s("p",[e._v("1、密码必须包含：数字、大写字母、小写字母")])])],1),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"text",size:"large"},on:{click:e.cancle}},[e._v("取消")]),s("Button",{attrs:{type:"primary",size:"large",loading:e.editBtnLoading},on:{click:e.edit}},[e._v("修改")])],1)],1),s("Modal",{attrs:{title:"查看图片"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?s("img",{staticStyle:{width:"100%"},attrs:{src:"https://o5wwk8baw.qnssl.com/"+e.imgName+"/large"}}):e._e()])],1)},r=[],i=(s("28a5"),s("7f7f"),s("c24f")),n=s("c276"),o=s("2e19"),l=s("480a"),u=s.n(l),c=s("0634"),d=s.n(c),m=s("4512"),p=s.n(m),h=(s("1dd5"),{name:"UserInfo",components:{},data:function(){return{defaultList:[{name:"a42bdcc1178e62b4694c830f028db5c0",url:"https://o5wwk8baw.qnssl.com/a42bdcc1178e62b4694c830f028db5c0/avatar"}],imgName:"",visible:!1,uploadList:[],itemMenuName1:"基础信息",itemMenuName2:"社交信息",itemMenuName3:"安全设置",menuItem:1,qqImg:u.a,weChatImg:d.a,aliPayImg:p.a,saveBtnLoading:!1,editBtnLoading:!1,editPasswordModal:!1,user:{userId:null,userPhone:null,userEmail:null,userCreateTime:null,userDetailNickname:null,userDetailHeadicon:null,userDetailGender:"0",userDetailBirthday:null,userDetailAge:null,userDetailQq:null,userDetailQqQrcode:null,userDetailWechat:null,userDetailWechatQrcode:null,userDetailAlipay:null,userDetailAlipayQrcode:null,userDetailShareCode:null},passwordForm:{oldPassword:"",password:"",confirmPassword:""},validateRules:{oldPassword:[{type:"string",required:!0,message:"此项为必须项",trigger:"blur"}],password:[{type:"string",required:!0,message:"此项为必须项",trigger:"blur"}],confirmPassword:[{type:"string",required:!0,message:"此项为必须项",trigger:"blur"}]}}},computed:{},mounted:function(){this.initUserInfo()},methods:{handleView:function(e){this.imgName=e,this.visible=!0},handleSuccess:function(e,t){t.url="https://o5wwk8baw.qnssl.com/7eb99afb9d5f317c912f08b5212fd69a/avatar",t.name="7eb99afb9d5f317c912f08b5212fd69a"},handleFormatError:function(e){this.$Notice.warning({title:"文件格式不正确",desc:"文件格式 "+e.name+" 不正确，请选择JPG或PNG。"})},handleMaxSize:function(e){this.$Notice.warning({title:"超出文件大小限制",desc:"文件  "+e.name+" 太大, 最大上传 2M。"})},handleBeforeUpload:function(){var e=this.uploadList.length<1;return e||this.$Notice.warning({title:"最多可以上载1张图片。"}),e},switchMenu:function(e){this.menuItem=e},initUserInfo:function(){var e=this;Object(i["d"])().then(function(t){var s=t.data;s.code===o["b"]?0!==s.data.total&&(e.user=s.data.rows[0],e.user.userDetailGender=e.user.userDetailGender+"",null!=e.user.userDetailBirthday&&(e.user.userDetailBirthday=e.user.userDetailBirthday.split(" ")[0])):e.$Message.error(s.message)}).catch(function(e){console.log(e)})},generatorUserParam:function(){var e={age:this.user.userDetailAge,alipay:this.user.userDetailAlipay,alipayQrcode:this.user.userDetailAlipayQrcode,birthday:this.user.userDetailBirthday+" 00:00:00",createTime:this.user.userCreateTime,gender:this.user.userDetailGender,headicon:this.user.userDetailHeadicon,id:this.user.userId,isActive:this.user.isActive,nickname:this.user.userDetailNickname,qq:this.user.userDetailQq,qqQrcode:this.user.userDetailQqQrcode,shareCode:this.user.userDetailShareCode,updateTime:this.user.updateTime,version:this.user.version,wechat:this.user.wechat,wechatQrcode:this.user.wechatQrcode};return e},saveInfo:function(){var e=this,t=this.generatorUserParam();Object(i["q"])(t).then(function(t){var s=t.data;s.code===o["b"]?e.$Message.success(s.message):e.$Message.error(s.message)}).catch(function(t){e.$Message.error(t)})},userOpt:function(e){"password"===e?this.editPasswordModal=!0:"phone"===e?this.$Message.warning("暂不支持修改手机"):"email"===e&&this.$Message.warning("暂不支持修改邮箱")},userOptBind:function(e,t){document.getElementById(t).innerText;"wechat"===e?this.$Message.warning("暂未实现"):"qq"===e?this.$Message.warning("暂未实现"):"alipay"===e&&this.$Message.warning("暂未实现")},cancle:function(){this.$refs["passwordForm"].resetFields(),this.editPasswordModal=!1},edit:function(){var e=this;this.$refs["passwordForm"].validate(function(t){if(t){if(e.passwordForm.password===e.passwordForm.oldPassword)return void e.$Message.error("新密码和旧密码一致");e.editBtnLoading=!0,Object(i["p"])(e.passwordForm).then(function(t){e.editBtnLoading=!1;var s=t.data;s.code===o["b"]?(e.$Message.info(s.message),e.cancle(),setTimeout(function(){Object(i["h"])().then(function(t){var s=t.data;s.code===o["b"]&&(Object(n["o"])(),e.$router.push({name:"login"}))})},500)):e.$Message.error(s.message)}).catch(function(t){e.$Message.error(t)})}})},setDate:function(e){""!=e?(this.user.userDetailBirthday=e,this.user.userDetailAge=this.countAge(e)):this.user.userDetailAge=""},countAge:function(e){var t,s=e.split("-"),a=s[0],r=s[1],i=s[2],n=new Date,o=n.getFullYear(),l=n.getMonth()+1,u=n.getDate();if(o==a)t=0;else{var c=o-a;if(c>0)if(l==r){var d=u-i;t=d<0?c-1:c}else{var m=l-r;t=m<0?c-1:c}else t=-1}return t}}}),f=h,w=s("2877"),g=Object(w["a"])(f,a,r,!1,null,null,null);t["default"]=g.exports}}]);